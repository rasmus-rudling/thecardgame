(this["webpackJsonpreact-vers"]=this["webpackJsonpreact-vers"]||[]).push([[0],{12:function(e,a,t){e.exports={myTeam:"result_myTeam__NxD2r",otherTeam:"result_otherTeam__1wMq_",row:"result_row__1ULDB",container:"result_container__2y_V2",redText:"result_redText__20cAn",blueText:"result_blueText__au6ny"}},18:function(e,a,t){e.exports=t.p+"static/media/red_card.2abfa2da.png"},19:function(e,a,t){e.exports=t.p+"static/media/blue_card.db0b65ea.png"},33:function(e,a,t){e.exports=t.p+"static/media/headerImage.aa125e65.png"},41:function(e,a,t){e.exports=t(74)},47:function(e,a,t){},48:function(e,a,t){},70:function(e,a,t){},71:function(e,a,t){},72:function(e,a,t){},74:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(35),l=t.n(c),o=(t(46),t(47),t(6)),s=t(14),m=t(78),i=t(79),d=t(39),u=t(80),p=t(81),E=(t(48),t(16));var h=function(e){var a=e.email,n=e.setEmail,c=e.password,l=e.setPassword,o=(e.loginError,e.setLoginError),h=Object(s.f)();return r.a.createElement(m.a,{className:"startContainer"},r.a.createElement(i.a,null,r.a.createElement(d.a,null,r.a.createElement("img",{src:t(33),alt:"THE CARD GAME",id:"headerimg"}))),r.a.createElement(i.a,null,r.a.createElement(d.a,null,r.a.createElement("div",{id:"text"}))),r.a.createElement(i.a,null,r.a.createElement(d.a,{md:3}),r.a.createElement(d.a,{md:6},r.a.createElement("div",{className:"loginBox"},r.a.createElement(u.a,{onSubmit:function(e){return function(e){e.preventDefault(),E.auth().signInWithEmailAndPassword(a,c).then((function(){h.push("/chat")}),(function(e){o("Server error"),console.log(e)}))}(e)}},r.a.createElement(u.a.Group,{controlId:"formBasicEmail"},r.a.createElement(u.a.Label,null,"Email address:"),r.a.createElement(u.a.Control,{type:"email",autoFocus:!0,placeholder:"Enter email",onChange:function(e){return n(e.target.value)}}),r.a.createElement(u.a.Text,{className:"text-muted"})),r.a.createElement(u.a.Group,{controlId:"formBasicPassword"},r.a.createElement(u.a.Label,null,"Password:"),r.a.createElement(u.a.Control,{type:"text",placeholder:"Password",onChange:function(e){return l(e.target.value)}})),r.a.createElement(p.a,{type:"submit"},"Logga in")))),r.a.createElement(d.a,{md:3})))},g=t(21),f=t.n(g),v=t(28),b=t(20),C=t(40),T=t(16);var x=function(e){var a=e.currentUsers,t=Object(n.useState)(0),c=Object(o.a)(t,2),l=c[0],s=c[1],m=Object(n.useState)(15),i=Object(o.a)(m,2),d=i[0],u=i[1];return Object(n.useEffect)((function(){var e;if(u(10),l>=d){300===d&&u(60),s(0);var t=new Date,n=t.getSeconds(),r=t.getMinutes(),c=t.getHours(),o=n<10?"0".concat(n):"".concat(n),m=r<10?"0".concat(r):"".concat(r),i=c<10?"0".concat(c):"".concat(c);T.firestore().collection("chats").doc(a).update({messages:T.firestore.FieldValue.arrayUnion({sender:"Admin",message:"\xc4r ni redo att g\xe5 till beslut?",senderImgURL:"none",timestamp:"".concat(i,":").concat(m,":").concat(o)}),usersVoted:[]}).then((function(){console.log("Adminmeddelande skapat!")}))}return e=setInterval((function(){s((function(e){return e+1}))}),1e3),function(){return clearInterval(e)}}),[l,a]),r.a.createElement("div",null)};t(70),t(71),t(72);var j=function(e){var a=e.otherChats,t=e.handleChange,c=Object(n.useState)(5),l=Object(o.a)(c,2),s=l[0],m=l[1],i=Object(n.useState)(0),d=Object(o.a)(i,2),u=d[0],p=d[1],E=Object(n.useState)(0),h=Object(o.a)(E,2),g=h[0],f=h[1];function v(e,a,t){for(var n=0,r=0;0===n;)n=Math.random();for(;0===r;)r=Math.random();var c=Math.sqrt(-2*Math.log(n))*Math.cos(2*Math.PI*r);return((c=c/10+.5)>1||c<0)&&(c=v(e,a,t)),c=Math.pow(c,t),c*=a-e,c+=e}return Object(n.useEffect)((function(){var e,n;u>=s&&(p(0),g<20?(t(3,12,1,a),n=Math.round(v(2,12,1)),m(n)):g<55?(t(2,35,2,a),n=Math.round(v(2,30,1)),m(n)):g<90?(t(2,12,2,a),n=Math.round(v(3,12,3)),m(n)):g<100?(t(2,12,3,a),n=Math.round(v(2,12,1)),m(n)):(t(3,35,2,a),n=Math.round(v(2,30,1)),m(n)));return e=setInterval((function(){p((function(e){return e+1})),f((function(e){return e+1}))}),1e3),function(){return clearInterval(e)}})),r.a.createElement("div",null)};var y=function(){var e=Object(n.useState)([]),a=Object(o.a)(e,2),t=a[0],c=a[1],l=Object(n.useState)(0),s=Object(o.a)(l,2),m=s[0],u=s[1],p=Object(n.useState)(0),E=Object(o.a)(p,2),h=E[0],g=E[1],f=Object(n.useState)(0),v=Object(o.a)(f,2),b=v[0],C=v[1],T=Object(n.useState)(m),x=Object(o.a)(T,2),y=x[0],O=x[1],N=[m,h,b],M=["Axel Hagel","Elin Rudling","Niklas L\xf6wbeer"],w=["https://i.imgur.com/IBlrCCT.jpg","https://i.imgur.com/wBeQrMt.jpg","https://i.imgur.com/GRSyGWE.jpg"];function I(e,a,t){for(var n=0,r=0;0===n;)n=Math.random();for(;0===r;)r=Math.random();var c=Math.sqrt(-2*Math.log(n))*Math.cos(2*Math.PI*r);return((c=c/10+.5)>1||c<0)&&(c=I(e,a,t)),c=Math.pow(c,t),c*=a-e,c+=e}return Object(n.useEffect)((function(){t.forEach((function(e){var a=document.createElement("div"),t=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div"),c=document.createElement("img"),l=document.createElement("div");if(l.innerText="".concat(e.timeStamp," ").concat(e.sender),c.src=e.imgURL,l.className="nameTimeTag",c.className="img-element-other-team",n.className="row",r.className="col",t.innerText=e.message,t.className="otherMessages",a.className="otherMessagesBox",a.append(l),a.append(c),a.append(t),r.append(a),n.append(r),"undefined"!==t.innerText){document.getElementById("chatTextOther").append(n);var o=document.getElementById("chatTextOther");o.scrollTop=o.scrollHeight}}))}),[t]),r.a.createElement("div",{className:"chatBox",id:"secretChat"},r.a.createElement(i.a,null,r.a.createElement(d.a,null,r.a.createElement("div",{id:"userinfo"},r.a.createElement("b",null,"Motst\xe5ndarlaget:"),r.a.createElement("br",null),r.a.createElement("img",{src:"https://i.imgur.com/IBlrCCT.jpg",alt:""})," Axel Hagel",r.a.createElement("img",{src:"https://i.imgur.com/wBeQrMt.jpg",alt:""})," Elin Rudling",r.a.createElement("img",{src:"https://i.imgur.com/GRSyGWE.jpg",alt:""})," Niklas L\xf6wbeer"))),r.a.createElement(i.a,null,r.a.createElement(d.a,null,r.a.createElement("div",{id:"chatTextOther"},r.a.createElement(j,{otherChats:t,handleChange:function(e,a,t){for(var n=arguments.length,r=new Array(n>3?n-3:0),l=3;l<n;l++)r[l-3]=arguments[l];var o,s=r,i="";o=Math.round(I(e,a,t));var d=Math.round(2*Math.random());N[d]!==y&&(d=Math.round(2*Math.random()),N[d]!==y&&(d=Math.round(2*Math.random()),N[d]!==y&&(d=Math.round(2*Math.random())))),0===d?u((function(e){return e+1})):1===d?g((function(e){return e+1})):C((function(e){return e+1})),O(m<y?m:h<y?h:b);for(var p=M[d],E=w[d],f=0;f<o;f++)i+="\u3000";var v=new Date,T=v.getMinutes(),x=v.getHours(),j=T<10?"0".concat(T):"".concat(T),R=x<10?"0".concat(x):"".concat(x),S={message:i,sender:p,imgURL:E,timeStamp:"".concat(R,":").concat(j)};s.push(S),c(s)}})))))},O=t(16);var N=function(e){var a=e.email,c=e.resultHandler,l=Object(s.f)(),E=Object(n.useState)([]),h=Object(o.a)(E,2),g=h[0],T=h[1],j=Object(n.useState)(""),N=Object(o.a)(j,2),M=N[0],w=N[1],I=Object(n.useState)(""),R=Object(o.a)(I,2),S=R[0],B=R[1],L=Object(n.useState)(!0),k=Object(o.a)(L,2),P=k[0],_=k[1];Object(n.useEffect)((function(){O.auth().onAuthStateChanged(function(){var e=Object(v.a)(f.a.mark((function e(a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=4;break}l.push("/"),e.next=6;break;case 4:return e.next=6,O.firestore().collection("chats").where("users","array-contains",a.email).onSnapshot(function(){var e=Object(v.a)(f.a.mark((function e(a){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.docs.map((function(e){return e.data()})),e.next=3,T(t);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),O.firestore().collection("users").doc(a).onSnapshot((function(e){w(e.data().name),B(e.data().imgURL)}))}),[]);var A,U,F="",G=[];console.log("---"),console.log(g[1]),g.filter((function(e,t){var n=!1;return e.users.forEach((function(e){e===a&&(n=!0)})),n})).forEach((function(e,n){document.getElementById("chatMessages").innerHTML="",e.users.forEach((function(e,a,t){a!==t.length-1?F+=e+":":F+=e})),console.log(n),U=e.teamReady,G=e.usersVoted;var r=O.firestore().collection("chats").doc(F);if(console.log(U,"Teamready"),U&&setTimeout((function(){var a=e.chosenRedCard,n=e.chosenBlueCard;console.log(a),console.log(n);for(var r=document.createElement("div"),c=0;c<a;c++){var l=document.createElement("img");l.src=t(18),l.className="choicesCard",r.append(l)}for(var o=0;o<n;o++){var s=document.createElement("img");s.src=t(19),s.className="choicesCard",r.append(s)}var m=document.getElementById("chosenCardContainer");null!==m&&(m.innerHTML="",m.append(r))}),50),e.chosenBlueCard+e.chosenRedCard===3){var o=e.chosenRedCard>=2?"redCard":"blueCard",s=e.otherTeamFinalCard,m=-1,i=-1;"redCard"===o&&"redCard"===s?(m=0,i=0):"redCard"===o&&"blueCard"===s?(m=100,i=0):"blueCard"===o&&"redCard"===s?(m=0,i=100):"blueCard"===o&&"blueCard"===s&&(m=50,i=50),r.update({teamPoints:m,finalCard:o}),c(o,s,m,i),l.push("/result")}e.messages.forEach((function(t){var n=document.createElement("div"),c=document.createElement("div"),l=document.createElement("div"),o=document.createElement("img");if(A=F.split(":")[0],o.src=t.senderImgURL,c.className="row",l.className="col","Admin"===t.sender){var s=e.readyToChoose,m=e.notReadyToChoose;s+m===3&&(s>=2&&(r.update({teamReady:!0}),a===A&&P&&_(!1)),r.update({messages:O.firestore.FieldValue.arrayRemove(t)}),r.update({readyToChoose:0,notReadyToChoose:0})),n.className="adminMessages",n.innerText=" ".concat(t.message);var i=document.createElement("button"),d=document.createElement("button");i.innerText="Ja",d.innerText="Nej",console.log(G.includes(a)),G.includes(a)?(i.className="hide",d.className="hide"):(i.className="",d.className=""),i.addEventListener("click",(function(){i.className="hide",d.className="hide",r.update({readyToChoose:e.readyToChoose+1,usersVoted:O.firestore.FieldValue.arrayUnion(a)})})),d.addEventListener("click",(function(){i.className="hide",d.className="hide",r.update({notReadyToChoose:e.notReadyToChoose+1,usersVoted:O.firestore.FieldValue.arrayUnion(a)})})),n.append(i),n.append(d);for(var u=0;u<s;u++)n.append("\u2714\ufe0f");for(var p=0;p<m;p++)n.append("\u274c");l.append(n),c.append(l)}else if(t.sender===M){var E=document.createElement("div"),h=document.createElement("div");h.innerText="".concat(t.timestamp," ").concat(t.sender),n.innerText=" ".concat(t.message),E.append(h),E.append(n),E.append(o),E.className="myMessagesBox",n.className="myMessages",h.className="nameTimeTag",l.append(E),c.append(l)}else{var g=document.createElement("div"),f=document.createElement("div");f.innerText="".concat(t.timestamp," ").concat(t.sender),n.innerText=" ".concat(t.message),g.append(f),g.append(o),g.append(n),g.className="otherMessagesBox",n.className="otherMessages",f.className="nameTimeTag",l.append(g),c.append(l)}document.getElementById("chatMessages").append(c)}));var d=document.getElementById("chatMessages");d.scrollTop=d.scrollHeight}));var H=r.a.createElement("div",{className:"popContent"},r.a.createElement("div",{id:"header"}," SPELGRELER "),"Lorem ipsum dolor sit amet consectetur adipisicing elit. Atque, a nostrum. Dolorem, repellat quidem ut, minima sint vel eveniet quibusdam voluptates delectus doloremque, explicabo tempore dicta adipisci fugit amet dignissimos?",r.a.createElement("br",null),r.a.createElement("br",null),"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Consequatur sit commodi beatae optio voluptatum sed eius cumque, delectus saepe repudiandae explicabo nemo nam libero ad, doloribus, voluptas rem alias. Vitae?"),V=null;a===A&&P&&(V=r.a.createElement(x,{currentUsers:F}));var q=null;return U&&(q=r.a.createElement("div",{id:"voteBox"},r.a.createElement(i.a,null,r.a.createElement(d.a,null,r.a.createElement("h5",null,"V\xc4LJ KORT H\xc4R"),"Se till att vara \xf6verrens i gruppen innan valet g\xf6rs. Ni v\xe4ljer kort som ett lag.")),r.a.createElement(i.a,null,r.a.createElement(d.a,null,r.a.createElement("div",{className:"inline-block",id:"redCardChooser"},r.a.createElement("div",{onClick:function(){document.getElementById("redCardChooser").className="hide",document.getElementById("blueCardChooser").className="hide";var e=O.firestore().collection("chats").doc(F),a=O.firestore.FieldValue.increment(1);e.update({chosenRedCard:a})}},r.a.createElement("img",{src:t(18)}),r.a.createElement("h6",{className:"inline-block"},"R\xd6TT KORT"))),r.a.createElement("div",{className:"inline-block",id:"blueCardChooser"},r.a.createElement("div",{onClick:function(){document.getElementById("redCardChooser").className="hide",document.getElementById("blueCardChooser").className="hide";var e=O.firestore().collection("chats").doc(F),a=O.firestore.FieldValue.increment(1);e.update({chosenBlueCard:a})}},r.a.createElement("img",{src:t(19)}),r.a.createElement("h6",{className:"inline-block"},"BL\xc5TT KORT"))))),r.a.createElement(i.a,null,r.a.createElement(d.a,null,r.a.createElement("p",{className:"choicesText"},"Era val: "),r.a.createElement("div",{id:"chosenCardContainer"}))))),r.a.createElement(m.a,{className:"chatContainer",fluid:!0},r.a.createElement(i.a,null,r.a.createElement(d.a,null,r.a.createElement("img",{src:t(33),alt:"THE CARD GAME",id:"headerimg"}))),r.a.createElement(i.a,null," ",r.a.createElement(d.a,{sm:12,lg:6},"  ",r.a.createElement("div",{className:"chatBox"},r.a.createElement(i.a,null,r.a.createElement(d.a,{md:4},r.a.createElement("div",{id:"userinfo"},r.a.createElement("b",null,"Inloggad som:"),r.a.createElement("br",null),r.a.createElement("img",{src:"https://img.freepik.com/free-vector/businessman-profile-cartoon_18591-58479.jpg?size=338&ext=jpg",alt:""})," ",M)),r.a.createElement(d.a,{md:8},r.a.createElement("div",{id:"userinfo"},r.a.createElement("b",null,"Lagmedlemmar"),r.a.createElement("br",null),r.a.createElement("img",{src:"https://www.positivelysplendid.com/wp-content/uploads/2013/09/Circle-Crop-Profile-300x300.png",alt:""})," Emma Bobsson",r.a.createElement("img",{src:"https://images.squarespace-cdn.com/content/v1/5589a812e4b0248058743f7e/1562001389112-WFLCO7JEU2GDDM9ANYXT/ke17ZwdGBToddI8pDm48kMh3mVmBaCAeGwqCLG3iONRZw-zPPgdn4jUwVcJE1ZvWQUxwkmyExglNqGp0IvTJZamWLI2zvYWH8K3-s_4yszcp2ryTI0HqTOaaUohrI8PITeQtWPcxF65ANawkK25DREOmFck9peR6QL8AnpRiPJE/LAURA+PROFILE+CIRCLE+NEW.png",alt:""})," Mary Major"))),r.a.createElement(i.a,null,r.a.createElement(d.a,null,V,r.a.createElement("div",{id:"chatMessages"}))),r.a.createElement(i.a,null,r.a.createElement(d.a,{xs:12},r.a.createElement("div",{id:"submitRow"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault();var a=document.getElementById("msg-box").value,t=new Date,n=t.getMinutes(),r=t.getHours(),c=n<10?"0".concat(n):"".concat(n),l=r<10?"0".concat(r):"".concat(r);O.firestore().collection("chats").doc(F).update({messages:O.firestore.FieldValue.arrayUnion({sender:M,message:a,timestamp:"".concat(l,":").concat(c),senderImgURL:S})}),document.getElementById("msg-box").value="",document.getElementById("msg-box").focus()}},r.a.createElement(i.a,null,r.a.createElement(d.a,null,r.a.createElement(u.a.Row,null,r.a.createElement(u.a.Control,{bsPrefix:"send_text",type:"text",id:"msg-box",autoFocus:!0}),r.a.createElement(p.a,{bsPrefix:"send_button",type:"submit"},"SKICKA")))))))))),r.a.createElement(d.a,{sm:12,lg:6}," ",r.a.createElement(y,null),q)),r.a.createElement(i.a,null,r.a.createElement(d.a,null,r.a.createElement("div",{id:"logout"},r.a.createElement(C.a,{trigger:r.a.createElement("u",null,"Spelregler"),modal:!0},H),r.a.createElement(b.b,{to:"/ny_firebase_chatt"},"Log out")))))},M=t(12),w=t.n(M),I=(t(16),function(e){var a=document.createElement("img"),n=document.createElement("img");return a.src=t(18),n.src=t(19),r.a.createElement(m.a,{fluid:!0,className:w.a.container},setTimeout((function(){alert("Tack f\xf6r att du deltog i denna delt\xe4vling! Nu \xe4r du klar och kan st\xe4nga ned hemsidan!")}),3e3),r.a.createElement(i.a,{className:w.a.row},r.a.createElement(d.a,{md:6,className:w.a.myTeam},r.a.createElement("h1",null,"Ert val"),"redCard"===e.finalCard?r.a.createElement("img",{src:t(18)}):r.a.createElement("img",{src:t(19)}),r.a.createElement("p",null,"Ni f\xe5r ",r.a.createElement("strong",{className:100===e.myPoints||0===e.myPoints?w.a.redText:w.a.blueText},e.myPoints)," po\xe4ng var!")),r.a.createElement(d.a,{md:6,className:w.a.otherTeam},r.a.createElement("h1",null,"Motst\xe5ndarlagets val"),"redCard"===e.otherTeamFinalCard?r.a.createElement("img",{src:t(18)}):r.a.createElement("img",{src:t(19)}),r.a.createElement("p",null,"Motst\xe5ndarlaget f\xe5r ",r.a.createElement("strong",{className:100===e.myPoints||0===e.myPoints?w.a.redText:w.a.blueText},e.otherTeamPoints)," po\xe4ng var!"))))});var R=function(){var e=Object(n.useState)("rrudling@kth.se"),a=Object(o.a)(e,2),t=a[0],c=a[1],l=Object(n.useState)(""),m=Object(o.a)(l,2),i=m[0],d=m[1],u=Object(n.useState)(""),p=Object(o.a)(u,2),E=p[0],g=p[1],f=Object(n.useState)(""),v=Object(o.a)(f,2),C=v[0],T=v[1],x=Object(n.useState)(""),j=Object(o.a)(x,2),y=j[0],O=j[1],M=Object(n.useState)(-1),w=Object(o.a)(M,2),R=w[0],S=w[1],B=Object(n.useState)(-1),L=Object(o.a)(B,2),k=L[0],P=L[1];function _(e){d(e)}function A(e){console.log(e,"raz12"),c(e)}function A(e){c(e)}return r.a.createElement(b.a,null,r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/"},r.a.createElement(h,{email:t,setEmail:A,password:i,setPassword:_,loginError:E,setLoginError:g})),r.a.createElement(s.a,{exact:!0,path:"/thecardgame"},r.a.createElement(h,{email:t,setEmail:A,password:i,setPassword:_,loginError:E,setLoginError:g})),r.a.createElement(s.a,{exact:!0,path:"/chat"},r.a.createElement(N,{email:t,resultHandler:function(e,a,t,n){T(e),O(a),S(t),P(n)}})),r.a.createElement(s.a,{exact:!0,path:"/result"},r.a.createElement(I,{finalCard:C,otherTeamFinalCard:y,myPoints:R,otherTeamPoints:k}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var S=t(16);t(73);S.initializeApp({apiKey:"AIzaSyAdpOM4Bx2jIRTmqkLdxq2-WysYpZXW_BI",authDomain:"chatt-app-b6c9a.firebaseapp.com",databaseURL:"https://chatt-app-b6c9a.firebaseio.com",projectId:"chatt-app-b6c9a",storageBucket:"chatt-app-b6c9a.appspot.com",messagingSenderId:"999297534472",appId:"1:999297534472:web:5e2d45b432ecd04f385fbd",measurementId:"G-P2SMFJCGS3"}),l.a.render(r.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.b9fd0594.chunk.js.map