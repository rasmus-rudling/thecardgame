(this["webpackJsonpreact-vers"]=this["webpackJsonpreact-vers"]||[]).push([[0],{15:function(e,t,a){e.exports=a.p+"static/media/blue_card.db0b65ea.png"},16:function(e,t,a){e.exports=a.p+"static/media/red_card.2abfa2da.png"},32:function(e,t,a){e.exports=a.p+"static/media/headerImage.aa125e65.png"},40:function(e,t,a){e.exports=a(73)},46:function(e,t,a){},47:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(34),c=a.n(l),o=(a(45),a(46),a(6)),s=a(13),m=a(77),i=a(78),d=a(38),u=a(79),g=a(80),E=(a(47),a(20));var p=function(e){var t=e.email,n=e.setEmail,l=e.password,c=e.setPassword,o=(e.loginError,e.setLoginError),p=Object(s.f)();return r.a.createElement(m.a,{className:"startContainer"},r.a.createElement(i.a,null,r.a.createElement(d.a,null,r.a.createElement("img",{src:a(32),alt:"THE CARD GAME",id:"headerimg"}))),r.a.createElement(i.a,null,r.a.createElement(d.a,null,r.a.createElement("div",{id:"text"}))),r.a.createElement(i.a,null,r.a.createElement(d.a,{md:3}),r.a.createElement(d.a,{md:6},r.a.createElement("div",{className:"loginBox"},r.a.createElement(u.a,{onSubmit:function(e){return function(e){e.preventDefault(),E.auth().signInWithEmailAndPassword(t,l).then((function(){p.push("/chat")}),(function(e){o("Server error"),console.log(e)}))}(e)}},r.a.createElement(u.a.Group,{controlId:"formBasicEmail"},r.a.createElement(u.a.Label,null,"Email address:"),r.a.createElement(u.a.Control,{type:"email",autoFocus:!0,placeholder:"Enter email",onChange:function(e){return n(e.target.value)}}),r.a.createElement(u.a.Text,{className:"text-muted"})),r.a.createElement(u.a.Group,{controlId:"formBasicPassword"},r.a.createElement(u.a.Label,null,"Password:"),r.a.createElement(u.a.Control,{type:"text",placeholder:"Password",onChange:function(e){return c(e.target.value)}})),r.a.createElement(g.a,{type:"submit"},"Logga in")))),r.a.createElement(d.a,{md:3})))},h=a(19),f=a.n(h),v=a(26),b=a(18),j=a(39),k=a(20);var C=function(e){var t=e.currentUsers,a=Object(n.useState)(0),l=Object(o.a)(a,2),c=l[0],s=l[1],m=Object(n.useState)(15),i=Object(o.a)(m,2),d=i[0],u=i[1];return Object(n.useEffect)((function(){var e;if(u(10),c>=d){300===d&&u(60),s(0);var a=new Date,n=a.getSeconds(),r=a.getMinutes(),l=a.getHours(),o=n<10?"0".concat(n):"".concat(n),m=r<10?"0".concat(r):"".concat(r),i=l<10?"0".concat(l):"".concat(l);k.firestore().collection("chats").doc(t).update({messages:k.firestore.FieldValue.arrayUnion({sender:"Admin",message:"\xc4r ni redo att g\xe5 till beslut?",senderImgURL:"none",timestamp:"".concat(i,":").concat(m,":").concat(o)}),usersVoted:[]}).then((function(){console.log("Adminmeddelande skapat!")}))}return e=setInterval((function(){s((function(e){return e+1}))}),1e3),function(){return clearInterval(e)}}),[c,t]),r.a.createElement("div",null)};a(69),a(70),a(71);var M=function(e){var t=e.otherChats,a=e.handleChange,l=Object(n.useState)(5),c=Object(o.a)(l,2),s=c[0],m=c[1],i=Object(n.useState)(0),d=Object(o.a)(i,2),u=d[0],g=d[1],E=Object(n.useState)(0),p=Object(o.a)(E,2),h=p[0],f=p[1];function v(e,t,a){for(var n=0,r=0;0===n;)n=Math.random();for(;0===r;)r=Math.random();var l=Math.sqrt(-2*Math.log(n))*Math.cos(2*Math.PI*r);return((l=l/10+.5)>1||l<0)&&(l=v(e,t,a)),l=Math.pow(l,a),l*=t-e,l+=e}return Object(n.useEffect)((function(){var e,n;u>=s&&(g(0),h<20?(a(3,12,1,t),n=Math.round(v(2,12,1)),m(n)):h<55?(a(2,35,2,t),n=Math.round(v(2,30,1)),m(n)):h<90?(a(2,12,2,t),n=Math.round(v(3,12,3)),m(n)):h<100?(a(2,12,3,t),n=Math.round(v(2,12,1)),m(n)):(a(3,35,2,t),n=Math.round(v(2,30,1)),m(n)));return e=setInterval((function(){g((function(e){return e+1})),f((function(e){return e+1}))}),1e3),function(){return clearInterval(e)}})),r.a.createElement("div",null)};var x=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(0),s=Object(o.a)(c,2),m=s[0],u=s[1],g=Object(n.useState)(0),E=Object(o.a)(g,2),p=E[0],h=E[1],f=Object(n.useState)(0),v=Object(o.a)(f,2),b=v[0],j=v[1],k=Object(n.useState)(m),C=Object(o.a)(k,2),x=C[0],N=C[1],O=[m,p,b],T=["Axel Hagel","Elin Rudling","Niklas L\xf6wbeer"],y=["https://i.imgur.com/IBlrCCT.jpg","https://i.imgur.com/wBeQrMt.jpg","https://i.imgur.com/GRSyGWE.jpg"];function w(e,t,a){for(var n=0,r=0;0===n;)n=Math.random();for(;0===r;)r=Math.random();var l=Math.sqrt(-2*Math.log(n))*Math.cos(2*Math.PI*r);return((l=l/10+.5)>1||l<0)&&(l=w(e,t,a)),l=Math.pow(l,a),l*=t-e,l+=e}return Object(n.useEffect)((function(){a.forEach((function(e){var t=document.createElement("div"),a=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div"),l=document.createElement("img"),c=document.createElement("div");if(c.innerText="".concat(e.timeStamp," ").concat(e.sender),l.src=e.imgURL,c.className="nameTimeTag",l.className="img-element-other-team",n.className="row",r.className="col",a.innerText=e.message,a.className="otherMessages",t.className="otherMessagesBox",t.append(c),t.append(l),t.append(a),r.append(t),n.append(r),"undefined"!==a.innerText){document.getElementById("chatTextOther").append(n);var o=document.getElementById("chatTextOther");o.scrollTop=o.scrollHeight}}))}),[a]),r.a.createElement("div",{className:"chatBox",id:"secretChat"},r.a.createElement(i.a,null,r.a.createElement(d.a,null,r.a.createElement("div",{id:"userinfo"},r.a.createElement("b",null,"Motst\xe5ndarlaget:"),r.a.createElement("br",null),r.a.createElement("img",{src:"https://i.imgur.com/IBlrCCT.jpg",alt:""})," Axel Hagel",r.a.createElement("img",{src:"https://i.imgur.com/wBeQrMt.jpg",alt:""})," Elin Rudling",r.a.createElement("img",{src:"https://i.imgur.com/GRSyGWE.jpg",alt:""})," Niklas L\xf6wbeer"))),r.a.createElement(i.a,null,r.a.createElement(d.a,null,r.a.createElement("div",{id:"chatTextOther"},r.a.createElement(M,{otherChats:a,handleChange:function(e,t,a){for(var n=arguments.length,r=new Array(n>3?n-3:0),c=3;c<n;c++)r[c-3]=arguments[c];var o,s=r,i="";o=Math.round(w(e,t,a));var d=Math.round(2*Math.random());O[d]!==x&&(d=Math.round(2*Math.random()),O[d]!==x&&(d=Math.round(2*Math.random()),O[d]!==x&&(d=Math.round(2*Math.random())))),0===d?u((function(e){return e+1})):1===d?h((function(e){return e+1})):j((function(e){return e+1})),N(m<x?m:p<x?p:b);for(var g=T[d],E=y[d],f=0;f<o;f++)i+="\u3000";var v=new Date,k=v.getMinutes(),C=v.getHours(),M=k<10?"0".concat(k):"".concat(k),I=C<10?"0".concat(C):"".concat(C),B={message:i,sender:g,imgURL:E,timeStamp:"".concat(I,":").concat(M)};s.push(B),l(s)}})))))},N=r.a.createElement("div",null,"V\xe4lkomment till The Card Game. Ni har nu blivit indelade i tv\xe5 lag. B\xf6rja med att l\xe4sa igenom reglerna genom att klicka p\xe5 knappen 'spelregler' l\xe4ngst ned i f\xf6nstret."),O=r.a.createElement("div",null,r.a.createElement("i",null,"The Card Game")," g\xe5r ut p\xe5 att ni tillsammans i laget ska v\xe4lja ett r\xf6tt eller bl\xe5tt kort. Ni t\xe4vlar mot det andra laget och po\xe4ngen f\xf6rdelas enligt:",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("img",{src:a(15)}),r.a.createElement("img",{src:a(15)})," B\xe5da lagen v\xe4ljer det bl\xe5a kortet. Alla deltagare f\xe5r 50 po\xe4ng.",r.a.createElement("br",null),r.a.createElement("img",{src:a(16)}),r.a.createElement("img",{src:a(15)})," Ni v\xe4ljer det r\xf6da kortet. Det andra laget v\xe4ljer det bl\xe5a kortet. Alla deltagare i ditt lag f\xe5r 100 po\xe4ng ",r.a.createElement("i",null,"var"),". Alla deltagare i det andra laget f\xe5r 0 po\xe4ng.",r.a.createElement("br",null),r.a.createElement("img",{src:a(15)}),r.a.createElement("img",{src:a(16)})," Ni v\xe4ljer det bl\xe5a kortet. Det andra laget v\xe4ljer det r\xf6da kortet. Alla deltagare i ditt lag f\xe5r 0 po\xe4ng. Alla deltagare i det andra laget f\xe5r 100 po\xe4ng var.",r.a.createElement("br",null),r.a.createElement("img",{src:a(16)}),r.a.createElement("img",{src:a(16)}),r.a.createElement("i",null,r.a.createElement("b",null,"Men "))," v\xe4ljer ",r.a.createElement("i",null,"b\xe5da")," lagen det r\xf6da kortet f\xe5r alla deltagare, i b\xe5da lagen, 0 po\xe4ng.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("b",null,"Pris: ")," Du kommer spela spelet tv\xe5 g\xe5nger - vid tv\xe5 olika tillf\xe4llen. Du har vid b\xe5da dessa tillf\xe4llen m\xf6jlighet att samla po\xe4ng. Deltagaren som i slut\xe4ndan har flest po\xe4ng vinner presentkort p\xe5 200 kr p\xe5 valfri butik listad p\xe5 ",r.a.createElement("i",null,r.a.createElement("u",null,"gogift.com")),", d\xe4r finns tex Clas Ohlsson, \xc5hlens, MatHem, H&M och m\xe5nga mer.",r.a.createElement("br",null),r.a.createElement("br",null),"Nu \xe4r det dags f\xf6r er i laget att diskutera och komma fram till vilket kort ni vill v\xe4lja. En bot kommer efter en stund kolla med er om ni \xe4r redo att g\xe5 till beslut. N\xe4r alla lagmedlemmar bekr\xe4ftat att ni \xe4r redo kommer en ruta f\xf6r r\xf6stning dyka upp. Annars f\xe5r ni forts\xe4tta diskutera, och boten \xe5terkommer igen efter en stund. Ni kan som l\xe4ngst diskutera i 10 minuter. Det \xe4r inte m\xf6jligt att kommunicera med det andra laget.",r.a.createElement("br",null),r.a.createElement("br",null),"N\xe4r b\xe5da laget har tagit sitt beslut kommer en ruta upp med vilka som vann. Motst\xe5ndarlaget kan inte se att ni g\xe5tt till beslut f\xf6rr\xe4n efter spelet \xe4r \xf6ver.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("b",null,r.a.createElement("i",null,"Lycka till!"))),T=a(20);var y=function(e){var t=e.email,l=Object(s.f)(),c=Object(n.useState)([]),E=Object(o.a)(c,2),p=E[0],h=E[1],k=Object(n.useState)(""),M=Object(o.a)(k,2),y=M[0],w=M[1],I=Object(n.useState)(""),B=Object(o.a)(I,2),R=B[0],S=B[1],L=Object(n.useState)(!0),A=Object(o.a)(L,2),P=A[0],D=A[1];Object(n.useEffect)((function(){T.auth().onAuthStateChanged(function(){var e=Object(v.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}l.push("/"),e.next=6;break;case 4:return e.next=6,T.firestore().collection("chats").where("users","array-contains",t.email).onSnapshot(function(){var e=Object(v.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.docs.map((function(e){return e.data()})),e.next=3,h(a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T.firestore().collection("users").doc(t).onSnapshot((function(e){w(e.data().name),S(e.data().imgURL)}))}),[]);var G,U,H="",V=[];console.log("---"),console.log(p[1]),p.filter((function(e,a){var n=!1;return e.users.forEach((function(e){e===t&&(n=!0)})),n})).forEach((function(e,n){document.getElementById("chatMessages").innerHTML="",e.users.forEach((function(e,t,a){t!==a.length-1?H+=e+":":H+=e})),console.log(n),U=e.teamReady,V=e.usersVoted;var r=T.firestore().collection("chats").doc(H);console.log(U,"Teamready"),U&&setTimeout((function(){var t=e.chosenRedCard,n=e.chosenBlueCard;console.log(t),console.log(n);for(var r=document.createElement("div"),l=0;l<t;l++){var c=document.createElement("img");c.src=a(16),c.className="choicesCard",r.append(c)}for(var o=0;o<n;o++){var s=document.createElement("img");s.src=a(15),s.className="choicesCard",r.append(s)}var m=document.getElementById("chosenCardContainer");m.innerHTML="",m.append(r)}),50),e.messages.forEach((function(a){var n=document.createElement("div"),l=document.createElement("div"),c=document.createElement("div"),o=document.createElement("img");if(G=H.split(":")[0],o.src=a.senderImgURL,l.className="row",c.className="col","Admin"===a.sender){var s=e.readyToChoose,m=e.notReadyToChoose;s+m===3&&(s>=2&&(r.update({teamReady:!0}),t===G&&P&&D(!1)),r.update({messages:T.firestore.FieldValue.arrayRemove(a)}),r.update({readyToChoose:0,notReadyToChoose:0})),n.className="adminMessages",n.innerText=" ".concat(a.message);var i=document.createElement("button"),d=document.createElement("button");i.innerText="Ja",d.innerText="Nej",console.log(V.includes(t)),V.includes(t)?(i.className="hide",d.className="hide"):(i.className="",d.className=""),i.addEventListener("click",(function(){i.className="hide",d.className="hide",r.update({readyToChoose:e.readyToChoose+1,usersVoted:T.firestore.FieldValue.arrayUnion(t)})})),d.addEventListener("click",(function(){i.className="hide",d.className="hide",r.update({notReadyToChoose:e.notReadyToChoose+1,usersVoted:T.firestore.FieldValue.arrayUnion(t)})})),n.append(i),n.append(d);for(var u=0;u<s;u++)n.append("\u2714\ufe0f");for(var g=0;g<m;g++)n.append("\u274c");c.append(n),l.append(c)}else if(a.sender===y){var E=document.createElement("div"),p=document.createElement("div");p.innerText="".concat(a.timestamp," ").concat(a.sender),n.innerText=" ".concat(a.message),E.append(p),E.append(n),E.append(o),E.className="myMessagesBox",n.className="myMessages",p.className="nameTimeTag",c.append(E),l.append(c)}else{var h=document.createElement("div"),f=document.createElement("div");f.innerText="".concat(a.timestamp," ").concat(a.sender),n.innerText=" ".concat(a.message),h.append(f),h.append(o),h.append(n),h.className="otherMessagesBox",n.className="otherMessages",f.className="nameTimeTag",c.append(h),l.append(c)}document.getElementById("chatMessages").append(l)}));var l=document.getElementById("chatMessages");l.scrollTop=l.scrollHeight}));var F=r.a.createElement("div",{className:"popContent"},r.a.createElement("div",{id:"header"}," SPELGRELER "),O),W=null;t===G&&P&&(W=r.a.createElement(C,{currentUsers:H}));var J=null;return U&&(J=r.a.createElement("div",{id:"voteBox"},r.a.createElement(i.a,null,r.a.createElement(d.a,null,r.a.createElement("h5",null,"V\xc4LJ KORT H\xc4R"),"Se till att vara \xf6verrens i gruppen innan valet g\xf6rs. Ni v\xe4ljer kort som ett lag.")),r.a.createElement(i.a,null,r.a.createElement(d.a,null,r.a.createElement("div",{className:"inline-block",id:"redCardChooser"},r.a.createElement("div",{onClick:function(){document.getElementById("redCardChooser").className="hide",document.getElementById("blueCardChooser").className="hide";var e=T.firestore().collection("chats").doc(H),t=T.firestore.FieldValue.increment(1);e.update({chosenRedCard:t})}},r.a.createElement("img",{src:a(16)}),r.a.createElement("h6",{className:"inline-block"},"R\xd6TT KORT"))),r.a.createElement("div",{className:"inline-block",id:"blueCardChooser"},r.a.createElement("div",{onClick:function(){document.getElementById("redCardChooser").className="hide",document.getElementById("blueCardChooser").className="hide";var e=T.firestore().collection("chats").doc(H),t=T.firestore.FieldValue.increment(1);e.update({chosenBlueCard:t})}},r.a.createElement("img",{src:a(15)}),r.a.createElement("h6",{className:"inline-block"},"BL\xc5TT KORT"))))),r.a.createElement(i.a,null,r.a.createElement(d.a,null,r.a.createElement("p",{className:"choicesText"},"Era val: "),r.a.createElement("div",{id:"chosenCardContainer"}))))),r.a.createElement(m.a,{className:"chatContainer",fluid:!0},r.a.createElement(i.a,null,r.a.createElement(d.a,null,r.a.createElement("img",{src:a(32),alt:"THE CARD GAME",id:"headerimg"}))),r.a.createElement(i.a,null,r.a.createElement(d.a,null,r.a.createElement("div",{id:"text"},N))),r.a.createElement(i.a,null," ",r.a.createElement(d.a,{sm:12,lg:6},"  ",r.a.createElement("div",{className:"chatBox"},r.a.createElement(i.a,null,r.a.createElement(d.a,{md:4},r.a.createElement("div",{id:"userinfo"},r.a.createElement("b",null,"Inloggad som:"),r.a.createElement("br",null),r.a.createElement("img",{src:"https://img.freepik.com/free-vector/businessman-profile-cartoon_18591-58479.jpg?size=338&ext=jpg",alt:""})," ",y)),r.a.createElement(d.a,{md:8},r.a.createElement("div",{id:"userinfo"},r.a.createElement("b",null,"Lagmedlemmar"),r.a.createElement("br",null),r.a.createElement("img",{src:"https://www.positivelysplendid.com/wp-content/uploads/2013/09/Circle-Crop-Profile-300x300.png",alt:""})," Emma Bobsson",r.a.createElement("img",{src:"https://images.squarespace-cdn.com/content/v1/5589a812e4b0248058743f7e/1562001389112-WFLCO7JEU2GDDM9ANYXT/ke17ZwdGBToddI8pDm48kMh3mVmBaCAeGwqCLG3iONRZw-zPPgdn4jUwVcJE1ZvWQUxwkmyExglNqGp0IvTJZamWLI2zvYWH8K3-s_4yszcp2ryTI0HqTOaaUohrI8PITeQtWPcxF65ANawkK25DREOmFck9peR6QL8AnpRiPJE/LAURA+PROFILE+CIRCLE+NEW.png",alt:""})," Mary Major"))),r.a.createElement(i.a,null,r.a.createElement(d.a,null,W,r.a.createElement("div",{id:"chatMessages"}))),r.a.createElement(i.a,null,r.a.createElement(d.a,{xs:12},r.a.createElement("div",{id:"submitRow"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault();var t=document.getElementById("msg-box").value,a=new Date,n=a.getMinutes(),r=a.getHours(),l=n<10?"0".concat(n):"".concat(n),c=r<10?"0".concat(r):"".concat(r);T.firestore().collection("chats").doc(H).update({messages:T.firestore.FieldValue.arrayUnion({sender:y,message:t,timestamp:"".concat(c,":").concat(l),senderImgURL:R})}),document.getElementById("msg-box").value="",document.getElementById("msg-box").focus()}},r.a.createElement(i.a,null,r.a.createElement(d.a,null,r.a.createElement(u.a.Row,null,r.a.createElement(u.a.Control,{bsPrefix:"send_text",type:"text",id:"msg-box",autoFocus:!0}),r.a.createElement(g.a,{bsPrefix:"send_button",type:"submit"},"SKICKA")))))))))),r.a.createElement(d.a,{sm:12,lg:6}," ",r.a.createElement(x,null),J)),r.a.createElement(i.a,null,r.a.createElement(d.a,null,r.a.createElement("div",{id:"logout"},r.a.createElement(j.a,{trigger:r.a.createElement("u",null,"Spelregler"),modal:!0},F),r.a.createElement(b.b,{to:"/thecardgame"},"Log out")))))};var w=function(){var e=Object(n.useState)("rrudling@kth.se"),t=Object(o.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(""),m=Object(o.a)(c,2),i=m[0],d=m[1],u=Object(n.useState)(""),g=Object(o.a)(u,2),E=g[0],h=g[1];function f(e){d(e)}function v(e){console.log(e,"raz12"),l(e)}function v(e){l(e)}return r.a.createElement(b.a,null,r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/"},r.a.createElement(p,{email:a,setEmail:v,password:i,setPassword:f,loginError:E,setLoginError:h})),r.a.createElement(s.a,{exact:!0,path:"/thecardgame"},r.a.createElement(p,{email:a,setEmail:v,password:i,setPassword:f,loginError:E,setLoginError:h})),r.a.createElement(s.a,{exact:!0,path:"/chat"},r.a.createElement(y,{email:a}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var I=a(20);a(72);I.initializeApp({apiKey:"AIzaSyAdpOM4Bx2jIRTmqkLdxq2-WysYpZXW_BI",authDomain:"chatt-app-b6c9a.firebaseapp.com",databaseURL:"https://chatt-app-b6c9a.firebaseio.com",projectId:"chatt-app-b6c9a",storageBucket:"chatt-app-b6c9a.appspot.com",messagingSenderId:"999297534472",appId:"1:999297534472:web:5e2d45b432ecd04f385fbd",measurementId:"G-P2SMFJCGS3"}),c.a.render(r.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.43290a74.chunk.js.map